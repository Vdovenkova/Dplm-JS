(()=>{"use strict";(()=>{const e=document.querySelectorAll(".btn-popup"),t=document.querySelectorAll(".popup"),n=document.querySelector(".popup-discount");e.forEach((e=>{e.addEventListener("click",(e=>{let t=e.target;if(t.matches("a.call-btn")&&(e.preventDefault(),document.querySelector(".popup-call").style.display="block"),t.classList.contains("discount-btn")&&(n.style.display="block"),t.classList.contains("gauging-button")&&(document.querySelector(".popup-check").style.display="block"),t.classList.contains("consultation-btn")&&""!==document.getElementById("question").value&&(e.preventDefault(),document.querySelector(".popup-consultation").style.display="block"),t.matches("button.construct-btn")&&""!==document.getElementById("distance").value)n.classList.add("calculator-data"),n.style.display="block";else if(""===document.getElementById("distance").value){let e=document.createElement("div");return document.querySelector("button.construct-btn").before(e),e.textContent="Заполните это поле!",void setTimeout((()=>e.remove()),2e3)}}))}));const c=e=>{e.querySelectorAll("input").forEach((e=>{e.value=""}))};t.forEach((e=>{e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?(e.style.display="none",c(e)):(n=n.closest(".popup-content"),n||(e.style.display="none",c(e)))}))}))})(),(()=>{const e=document.querySelectorAll('a[role*="button"]'),t=document.querySelectorAll(".panel-collapse"),n=document.querySelectorAll('a[class*="button"]'),c=(e,n)=>{let c=document.getElementById(e);c.classList.contains("in")?c.classList.remove("in"):c.classList.add("in"),t.forEach((e=>{e!==c&&e.closest(`#${n}`)&&e.classList.remove("in")}))};n.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.target;t=t.closest('a[class*="button"]');let n=t.getAttribute("href").substr(1),o=t.dataset.parent.substr(1);c(n,o)}))})),e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let n=e.getAttribute("aria-controls"),o=e.dataset.parent.substr(1);c(n,o)}))}))})(),(()=>{const e=document.querySelectorAll(".hidden-block"),t=document.querySelector(".add-sentence-btn");t.addEventListener("click",(()=>{e.forEach((e=>{(e.classList.contains("visible-sm-block")||e.classList.contains("hidden"))&&(e.classList.remove("visible-sm-block"),e.classList.remove("hidden"))})),t.style.display="none"}))})(),(()=>{const e=document.querySelector(".calculator-block"),t=document.getElementById("myonoffswitch"),n=document.getElementById("myonoffswitch-two"),c=document.getElementById("second-well"),o=document.getElementById("calc-result"),s=document.querySelector(".diameter-one"),l=document.querySelector(".rings-one"),a=document.querySelector(".diameter-two"),r=document.querySelector(".rings-two");t.checked&&(c.style.display="none",o.value=1e4,a.classList.remove("calculator"),r.classList.remove("calculator")),n.checked=!1,e.addEventListener("change",(e=>{let d=e.target;(d.matches("select")||d.matches("input"))&&(()=>{let e=0,d=s.options.selectedIndex,i=l.options.selectedIndex,u=a.options.selectedIndex,m=r.options.selectedIndex;t&&!t.checked?(c.style.display="block",a.classList.add("calculator"),r.classList.add("calculator"),e=15e3):t&&t.checked&&(c.style.display="none",a.classList.remove("calculator"),r.classList.remove("calculator"),e=1e4),s&&0===d?e*=1:s&&1===d&&(e+=.2*e),a&&0===u?e*=1:a&&1===u&&(e+=.2*e),l&&0===i?e*=1:l&&1===i?e+=3e3:l&&2===i&&(e+=5e3),r&&0===m?e*=1:r&&1===m?e+=1e3:r&&2===m&&(e+=2e3),n.checked&&t.checked?e+=.1*e:n.checked&&!t.checked?e+=.2*e:n&&!n.checked&&(e=e),o.value=e})()}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.getElementById("question"),n=document.querySelector(".popup-discount"),c=document.createElement("div");let o;const s=document.createElement("div");s.style.cssText="\n    font-size: 18px;\n    color: #f28c07";const l=()=>{c.remove(),o.remove()};e.forEach((e=>{e.addEventListener("submit",(a=>{a.preventDefault(),(e=>{c.classList.add("sk-flow"),e.appendChild(c),c.innerHTML='\n      <div class="sk-flow-dot"></div>\n      <div class="sk-flow-dot"></div>\n      <div class="sk-flow-dot"></div>',o=document.createElement("style"),o.textContent="\n        :root {\n          --sk-color: #f28c07;\n        }\n\n        .sk-flow {\n          margin: auto;\n          width: 60px;\n          height: 35px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .sk-flow-dot {\n          width: 13px;\n          height: 13px;\n          background-color: var(--sk-color);\n          border-radius: 50%;\n          animation: sk-flow 1.4s cubic-bezier(0.455, 0.03, 0.515, 0.955) 0s infinite\n            both;\n        }\n\n        .sk-flow-dot:nth-child(1) {\n          animation-delay: -0.3s;\n        }\n        .sk-flow-dot:nth-child(2) {\n          animation-delay: -0.15s;\n        }\n\n        @keyframes sk-flow {\n          0%,\n          80%,\n          100% {\n            transform: scale(0.3);\n          }\n          40% {\n            transform: scale(1);\n          }\n        }",document.head.appendChild(o)})(e);const r=new FormData(e);e.closest(".popup-consultation")&&r.append(t.getAttribute("name"),t.value),e.closest(".calculator-data")&&document.querySelectorAll(".calculator").forEach((e=>{r.append(e.getAttribute("name"),e.value)}));let d={};r.forEach(((e,t)=>{d[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(d).then((t=>{if(200!==t.status)throw new Error("Status network not 200");l(),e.appendChild(s),s.textContent="Спасибо, мы скоро с Вами свяжемся!"})).catch((t=>{l(),e.appendChild(s),s.textContent="Ошибка! Что-то пошло не так.."})),setTimeout((()=>{e.querySelectorAll("input").forEach((e=>{e.value=""})),document.getElementById("question").value="",s.remove(),n.classList.contains("calculator-data")&&n.classList.remove("calculator-data")}),6e3)}))}));const a=e=>{document.getElementById(e).addEventListener("input",(e=>{let t=e.target;(t.classList.contains("phone-user")||t.classList.contains("numders"))&&(t.value=t.value.replace(/[^+\d]/g,"")),t.classList.contains("name")&&(t.value=t.value.replace(/[^А-Яа-яЁё\s]/gi,"")),t.classList.contains("text")&&(t.value=t.value.replace(/[^А-Яа-яЁё\s\.,:;!?+-]/gi,""))}))};a("form1"),a("form2"),a("form3"),a("form4"),a("form5"),a("form6"),a("form7"),a("distance")})()})();